/*
 * StoryViewer - Main story display area
 * Features: Header, canvas with backgrounds, pan/zoom, error states
 */

@import "../styles/tokens.css";

/* ═══════════════════════════════════════════════════════════════════════════════
 * CONTAINER
 * ═══════════════════════════════════════════════════════════════════════════════ */

.container {
	display: flex;
	flex-direction: column;
	height: 100%;
	background: var(--nb-bg-canvas);
}

.containerWithRightPanel {
	flex-direction: row;
}

.mainArea {
	display: flex;
	flex-direction: column;
	flex: 1;
	min-width: 0;
	min-height: 0;
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * HEADER
 * ═══════════════════════════════════════════════════════════════════════════════ */

.header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: var(--nb-space-3) var(--nb-space-6);
	background: var(--nb-bg-elevated);
	border-bottom: 1px solid var(--nb-border-subtle);
	flex-shrink: 0;
	gap: var(--nb-space-4);
}

/* Mobile: smaller padding */
@media (max-width: 767px) {
	.header {
		padding: var(--nb-space-2) var(--nb-space-3);
		gap: var(--nb-space-2);
	}
}

.title {
	font-size: var(--nb-text-base);
	font-weight: var(--nb-font-semibold);
	color: var(--nb-text-primary);
	margin: 0;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	min-width: 0;
}

/* Mobile: smaller title */
@media (max-width: 767px) {
	.title {
		font-size: var(--nb-text-sm);
	}
}

.headerControls {
	display: flex;
	align-items: center;
	gap: var(--nb-space-3);
	flex-shrink: 0;
}

/* Mobile: tighter spacing */
@media (max-width: 767px) {
	.headerControls {
		gap: var(--nb-space-1);
	}
}

.divider {
	width: 1px;
	height: 20px;
	background: var(--nb-border-default);
}

/* Mobile: hide dividers */
@media (max-width: 767px) {
	.divider {
		display: none;
	}
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * PAN TOGGLE
 * ═══════════════════════════════════════════════════════════════════════════════ */

.panButton {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 28px;
	height: 28px;
	border: none;
	border-radius: var(--nb-radius-sm);
	background: transparent;
	color: var(--nb-text-tertiary);
	cursor: pointer;
	transition:
		background var(--nb-transition-fast),
		color var(--nb-transition-fast);
}

.panButton:hover {
	background: var(--nb-bg-hover);
	color: var(--nb-text-secondary);
}

.panButtonActive {
	color: var(--nb-text-brand);
}

.panButtonActive:hover {
	color: var(--nb-text-brand);
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * ZOOM CONTROLS
 * ═══════════════════════════════════════════════════════════════════════════════ */

.zoomControls {
	display: flex;
	align-items: center;
	gap: var(--nb-space-1);
}

.zoomButton {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 28px;
	height: 28px;
	border: none;
	border-radius: var(--nb-radius-sm);
	background: transparent;
	color: var(--nb-text-secondary);
	cursor: pointer;
	transition:
		background var(--nb-transition-fast),
		color var(--nb-transition-fast);
}

.zoomButton:hover:not(:disabled) {
	background: var(--nb-bg-hover);
	color: var(--nb-text-primary);
}

.zoomButton:disabled {
	opacity: 0.4;
	cursor: not-allowed;
}

.zoomInputWrapper {
	position: relative;
	display: flex;
	align-items: center;
}

.zoomInput {
	width: 52px;
	padding: var(--nb-space-1) var(--nb-space-5) var(--nb-space-1) 2px;
	font-size: var(--nb-text-xs);
	font-weight: var(--nb-font-medium);
	color: var(--nb-text-secondary);
	background: var(--nb-bg-hover);
	border: 1px solid transparent;
	border-radius: var(--nb-radius-sm);
	text-align: right;
	font-variant-numeric: tabular-nums;
	transition:
		border-color var(--nb-transition-fast),
		background var(--nb-transition-fast);
}

.zoomInput:hover {
	background: var(--nb-bg-active);
}

.zoomInput:focus {
	outline: none;
	border-color: var(--nb-text-brand);
	background: var(--nb-bg-elevated);
}

.zoomInputSuffix {
	position: absolute;
	right: var(--nb-space-1-5);
	top: 50%;
	transform: translateY(-50%);
	font-size: var(--nb-text-xs);
	font-weight: var(--nb-font-medium);
	color: var(--nb-text-tertiary);
	pointer-events: none;
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * BACKGROUND SWITCHER
 * ═══════════════════════════════════════════════════════════════════════════════ */

.backgroundSwitcher {
	display: flex;
	align-items: center;
	gap: var(--nb-space-1);
}

.bgButton {
	position: relative;
	width: 28px;
	height: 28px;
	border-radius: var(--nb-radius-md);
	border: 2px solid var(--nb-border-default);
	overflow: hidden;
	cursor: pointer;
	transition:
		border-color var(--nb-transition-fast),
		box-shadow var(--nb-transition-fast);
	background: none;
	padding: 0;
}

.bgButton:hover {
	border-color: var(--nb-border-strong);
}

.bgButtonActive {
	border-color: var(--nb-text-brand);
	box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
}

.bgButtonInner {
	position: absolute;
	inset: 0;
	display: flex;
	align-items: center;
	justify-content: center;
}

.bgDefault {
	background: var(--nb-neutral-100);
}

@media (prefers-color-scheme: dark) {
	.bgDefault {
		background: var(--nb-neutral-800);
	}
}

.bgStriped {
	background-image: repeating-linear-gradient(-45deg, #fff, #fff 2px, #e5e5e5 2px, #e5e5e5 4px);
}

@media (prefers-color-scheme: dark) {
	.bgStriped {
		background-image: repeating-linear-gradient(-45deg, #262626, #262626 2px, #404040 2px, #404040 4px);
	}
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * CANVAS AREA
 * ═══════════════════════════════════════════════════════════════════════════════ */

.canvas {
	flex: 1;
	overflow: hidden;
	cursor: grab;
	user-select: none;
}

.canvas:active,
.canvasDragging {
	cursor: grabbing;
}

.canvasNoPan {
	cursor: default;
}

.canvasNoPan:active {
	cursor: default;
}

.canvasDefault {
	background: var(--nb-bg-canvas);
}

.canvasStriped {
	background-image: repeating-linear-gradient(-45deg, #fff, #fff 10px, #e5e5e5 10px, #e5e5e5 20px);
}

@media (prefers-color-scheme: dark) {
	.canvasStriped {
		background-image: repeating-linear-gradient(-45deg, #262626, #262626 10px, #404040 10px, #404040 20px);
	}
}

.canvasInner {
	display: flex;
	width: 100%;
	height: 100%;
	align-items: center;
	justify-content: center;
	transform-origin: center center;
	transition: none;
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * STORY FRAME
 * ═══════════════════════════════════════════════════════════════════════════════ */

.storyFrame {
	padding: var(--nb-space-8);
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * ERROR STATES
 * ═══════════════════════════════════════════════════════════════════════════════ */

.error {
	padding: var(--nb-space-4);
	border-radius: var(--nb-radius-md);
	border: 1px solid var(--nb-error-border);
	background: var(--nb-error-light);
}

.errorTitle {
	font-weight: var(--nb-font-medium);
	color: var(--nb-error-text);
	margin: 0 0 var(--nb-space-1) 0;
}

.errorMessage {
	font-size: var(--nb-text-sm);
	color: var(--nb-error-text);
	opacity: 0.9;
	margin: 0;
}
