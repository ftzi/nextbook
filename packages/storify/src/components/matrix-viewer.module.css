/*
 * MatrixViewer - Grid display for all prop combinations
 * Features: Responsive grid, cell labels, click to expand, background switcher
 */

@import "../styles/tokens.css";

/* ═══════════════════════════════════════════════════════════════════════════════
 * CONTAINER
 * ═══════════════════════════════════════════════════════════════════════════════ */

.container {
	display: flex;
	flex-direction: column;
	height: 100%;
	min-height: 0;
	background: var(--nb-bg-canvas);
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * HEADER
 * ═══════════════════════════════════════════════════════════════════════════════ */

.header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: var(--nb-space-3) var(--nb-space-6);
	background: var(--nb-bg-elevated);
	border-bottom: 1px solid var(--nb-border-subtle);
	flex-shrink: 0;
	gap: var(--nb-space-4);
	overflow: visible;
	position: relative;
	z-index: 10;
}

/* Mobile: smaller padding, wrap to multiple lines */
@media (max-width: 767px) {
	.header {
		padding: var(--nb-space-2) var(--nb-space-3);
		gap: var(--nb-space-2);
		flex-wrap: wrap;
	}
}

.headerLeft {
	display: flex;
	align-items: center;
	gap: var(--nb-space-3);
	min-width: 0;
}

/* Mobile: tighter spacing */
@media (max-width: 767px) {
	.headerLeft {
		gap: var(--nb-space-2);
	}
}

.title {
	font-size: var(--nb-text-base);
	font-weight: var(--nb-font-semibold);
	color: var(--nb-text-primary);
	margin: 0;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

/* Mobile: smaller title */
@media (max-width: 767px) {
	.title {
		font-size: var(--nb-text-sm);
	}
}

.badge {
	display: inline-flex;
	align-items: center;
	padding: var(--nb-space-1-5) var(--nb-space-3);
	font-size: var(--nb-text-xs);
	font-weight: var(--nb-font-medium);
	color: var(--nb-text-brand);
	background: var(--nb-bg-active);
	border-radius: var(--nb-radius-full);
	white-space: nowrap;
}

.divider {
	width: 1px;
	height: 20px;
	background: var(--nb-border-default);
	flex-shrink: 0;
}

/* Mobile: hide dividers */
@media (max-width: 767px) {
	.divider {
		display: none;
	}
}

.headerControls {
	display: flex;
	align-items: center;
	gap: var(--nb-space-3);
	flex-shrink: 0;
}

/* Mobile: tighter spacing */
@media (max-width: 767px) {
	.headerControls {
		gap: var(--nb-space-1);
	}
}

.backButton {
	display: flex;
	align-items: center;
	gap: var(--nb-space-1-5);
	padding: var(--nb-space-1-5) var(--nb-space-3);
	font-size: var(--nb-text-sm);
	font-weight: var(--nb-font-medium);
	color: var(--nb-text-secondary);
	background: var(--nb-bg-hover);
	border: none;
	border-radius: var(--nb-radius-md);
	cursor: pointer;
	transition:
		background var(--nb-transition-fast),
		color var(--nb-transition-fast);
}

.backButton:hover {
	background: var(--nb-bg-active);
	color: var(--nb-text-brand);
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * HEADER FILTERS - Inline filter chips
 * ═══════════════════════════════════════════════════════════════════════════════ */

.headerFilters {
	display: flex;
	align-items: center;
	gap: var(--nb-space-2);
	flex: 1;
	min-width: 0;
	overflow: visible;
}

.headerFilters::-webkit-scrollbar {
	display: none;
}

/* Mobile: scroll filters horizontally */
@media (max-width: 767px) {
	.headerFilters {
		gap: var(--nb-space-1-5);
	}
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * FILTER CHIPS - Compact filter dropdowns
 * ═══════════════════════════════════════════════════════════════════════════════ */

.filterChipWrapper {
	position: relative;
	flex-shrink: 0;
}

.filterChip {
	display: flex;
	align-items: center;
	gap: var(--nb-space-1-5);
	padding: var(--nb-space-1-5) var(--nb-space-3);
	font-size: var(--nb-text-xs);
	font-weight: var(--nb-font-medium);
	color: var(--nb-text-secondary);
	background: var(--nb-bg-hover);
	border: 1px solid transparent;
	border-radius: var(--nb-radius-full);
	cursor: pointer;
	transition:
		background var(--nb-transition-fast),
		border-color var(--nb-transition-fast),
		color var(--nb-transition-fast);
	white-space: nowrap;
}

.filterChip:hover {
	background: var(--nb-bg-active);
	color: var(--nb-text-primary);
}

.filterChipActive {
	background: var(--nb-bg-active);
	border-color: var(--nb-text-brand);
	color: var(--nb-text-brand);
}

.filterChipLabel {
	font-weight: var(--nb-font-medium);
}

.filterCountBadge {
	display: flex;
	align-items: center;
	justify-content: center;
	min-width: 16px;
	height: 16px;
	padding: 0 var(--nb-space-1);
	font-size: 10px;
	font-weight: var(--nb-font-bold);
	color: white;
	background: var(--nb-text-brand);
	border-radius: var(--nb-radius-full);
}

.chipChevron {
	flex-shrink: 0;
	opacity: 0.5;
	transition: transform var(--nb-transition-fast);
}

.chipChevronOpen {
	transform: rotate(180deg);
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * FILTER MENU - Dropdown with checkboxes
 * ═══════════════════════════════════════════════════════════════════════════════ */

.filterMenu {
	position: absolute;
	top: calc(100% + var(--nb-space-1));
	left: 0;
	min-width: 180px;
	background: var(--nb-bg-elevated);
	border: 1px solid var(--nb-border-default);
	border-radius: var(--nb-radius-lg);
	box-shadow: var(--nb-shadow-xl);
	z-index: 50;
	overflow: hidden;
}

.filterMenuHeader {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: var(--nb-space-2) var(--nb-space-3);
	font-size: var(--nb-text-xs);
	font-weight: var(--nb-font-medium);
	color: var(--nb-text-tertiary);
	border-bottom: 1px solid var(--nb-border-subtle);
}

.menuClearButton {
	font-size: var(--nb-text-xs);
	font-weight: var(--nb-font-medium);
	color: var(--nb-text-brand);
	background: none;
	border: none;
	cursor: pointer;
	padding: 0;
}

.menuClearButton:hover {
	text-decoration: underline;
}

.filterOptions {
	display: flex;
	flex-direction: column;
	max-height: 200px;
	overflow-y: auto;
	padding: var(--nb-space-1) 0;
}

.filterOption {
	display: flex;
	align-items: center;
	gap: var(--nb-space-2);
	padding: var(--nb-space-1-5) var(--nb-space-3);
	cursor: pointer;
	transition: background var(--nb-transition-fast);
}

.filterOption:hover {
	background: var(--nb-bg-hover);
}

.filterCheckbox {
	width: 14px;
	height: 14px;
	flex-shrink: 0;
	accent-color: var(--nb-text-brand);
	cursor: pointer;
}

.filterOptionLabel {
	font-size: var(--nb-text-sm);
	color: var(--nb-text-primary);
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * SORT MENU - Separate sort dropdown
 * ═══════════════════════════════════════════════════════════════════════════════ */

.sortMenuWrapper {
	position: relative;
	flex-shrink: 0;
}

.sortButton {
	display: flex;
	align-items: center;
	gap: var(--nb-space-1-5);
	padding: var(--nb-space-1-5) var(--nb-space-3);
	font-size: var(--nb-text-xs);
	font-weight: var(--nb-font-medium);
	color: var(--nb-text-secondary);
	background: var(--nb-bg-hover);
	border: 1px solid transparent;
	border-radius: var(--nb-radius-full);
	cursor: pointer;
	transition:
		background var(--nb-transition-fast),
		border-color var(--nb-transition-fast),
		color var(--nb-transition-fast);
	white-space: nowrap;
}

.sortButton:hover {
	background: var(--nb-bg-active);
	color: var(--nb-text-primary);
}

.sortButtonActive {
	background: var(--nb-bg-active);
	border-color: var(--nb-text-brand);
	color: var(--nb-text-brand);
}

.sortMenu {
	position: absolute;
	top: calc(100% + var(--nb-space-1));
	right: 0;
	min-width: 200px;
	background: var(--nb-bg-elevated);
	border: 1px solid var(--nb-border-default);
	border-radius: var(--nb-radius-lg);
	box-shadow: var(--nb-shadow-xl);
	z-index: 50;
	overflow: hidden;
}

.sortMenuHeader {
	padding: var(--nb-space-2) var(--nb-space-3);
	font-size: var(--nb-text-xs);
	font-weight: var(--nb-font-medium);
	color: var(--nb-text-tertiary);
	border-bottom: 1px solid var(--nb-border-subtle);
}

.sortOptions {
	display: flex;
	flex-direction: column;
	padding: var(--nb-space-1) 0;
}

.sortOption {
	display: flex;
	align-items: center;
}

.sortOptionButton {
	flex: 1;
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: var(--nb-space-2);
	padding: var(--nb-space-2) var(--nb-space-3);
	font-size: var(--nb-text-sm);
	font-weight: var(--nb-font-normal);
	color: var(--nb-text-primary);
	background: none;
	border: none;
	cursor: pointer;
	text-align: left;
	transition: background var(--nb-transition-fast);
}

.sortOptionButton:hover {
	background: var(--nb-bg-hover);
}

.sortOptionActive {
	font-weight: var(--nb-font-medium);
	color: var(--nb-text-brand);
}

.sortOptionLabel {
	flex: 1;
}

.sortDirectionBadge {
	font-size: var(--nb-text-xs);
	font-weight: var(--nb-font-medium);
	color: var(--nb-text-brand);
	padding: var(--nb-space-0-5) var(--nb-space-1-5);
	background: var(--nb-bg-active);
	border-radius: var(--nb-radius-sm);
}

.sortRemoveButton {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 28px;
	height: 28px;
	margin-right: var(--nb-space-1);
	color: var(--nb-text-tertiary);
	background: none;
	border: none;
	border-radius: var(--nb-radius-md);
	cursor: pointer;
	transition:
		color var(--nb-transition-fast),
		background var(--nb-transition-fast);
}

.sortRemoveButton:hover {
	color: var(--nb-error-text);
	background: var(--nb-bg-hover);
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * RESET BUTTON
 * ═══════════════════════════════════════════════════════════════════════════════ */

.resetButton {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 28px;
	height: 28px;
	color: var(--nb-text-tertiary);
	background: var(--nb-bg-hover);
	border: none;
	border-radius: var(--nb-radius-md);
	cursor: pointer;
	transition:
		color var(--nb-transition-fast),
		background var(--nb-transition-fast);
}

.resetButton:hover {
	color: var(--nb-error-text);
	background: var(--nb-bg-active);
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * EMPTY STATE
 * ═══════════════════════════════════════════════════════════════════════════════ */

.emptyState {
	flex: 1;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: var(--nb-space-4);
	padding: var(--nb-space-8);
	color: var(--nb-text-tertiary);
}

.emptyState p {
	margin: 0;
	font-size: var(--nb-text-base);
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * WARNING BANNER
 * ═══════════════════════════════════════════════════════════════════════════════ */

.warning {
	display: flex;
	align-items: center;
	gap: var(--nb-space-2);
	padding: var(--nb-space-2) var(--nb-space-6);
	font-size: var(--nb-text-sm);
	color: var(--nb-text-secondary);
	background: var(--nb-primary-50);
	border-bottom: 1px solid var(--nb-primary-100);
}

@media (prefers-color-scheme: dark) {
	.warning {
		background: rgba(99, 102, 241, 0.1);
		border-color: rgba(99, 102, 241, 0.2);
	}
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * GRID CONTAINER (scrollable area for virtualization)
 * ═══════════════════════════════════════════════════════════════════════════════ */

.gridContainer {
	flex: 1;
	min-height: 0;
	overflow-y: auto;
	padding: var(--nb-space-6);
	background: var(--nb-bg-canvas);
}

/* Mobile: smaller padding */
@media (max-width: 767px) {
	.gridContainer {
		padding: var(--nb-space-3);
	}
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * VIRTUAL GRID (row-based virtualization)
 * ═══════════════════════════════════════════════════════════════════════════════ */

.virtualGrid {
	position: relative;
	width: 100%;
}

.virtualRow {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * FULL GRID (for fullRender mode / screenshots)
 * ═══════════════════════════════════════════════════════════════════════════════ */

.fullGrid {
	display: grid;
	gap: var(--nb-space-4);
	align-content: start;
}

/* Mobile: smaller gap */
@media (max-width: 767px) {
	.fullGrid {
		gap: var(--nb-space-3);
	}
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * GRID CELLS
 * ═══════════════════════════════════════════════════════════════════════════════ */

.cell {
	display: flex;
	flex-direction: column;
	background: var(--nb-bg-elevated);
	border: 1px solid var(--nb-border-subtle);
	border-radius: var(--nb-radius-lg);
	overflow: hidden;
	cursor: pointer;
	transition:
		border-color var(--nb-transition-fast),
		box-shadow var(--nb-transition-fast),
		transform var(--nb-transition-fast);
	text-align: left;
	padding: 0;
}

/* Cells in virtual grid use absolute positioning */
.virtualRow .cell {
	position: absolute;
	top: 0;
}

.cell:hover {
	border-color: var(--nb-border-strong);
	box-shadow: var(--nb-shadow-md);
	transform: translateY(-1px);
}

.cell:focus-visible {
	outline: none;
	box-shadow: var(--nb-ring);
}

.cellLabel {
	padding: var(--nb-space-2) var(--nb-space-3);
	font-size: var(--nb-text-xs);
	font-family: var(--nb-font-mono);
	color: var(--nb-text-tertiary);
	background: var(--nb-bg-panel);
	border-bottom: 1px solid var(--nb-border-subtle);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.cellContent {
	display: flex;
	align-items: center;
	justify-content: center;
	padding: var(--nb-space-4);
	min-height: 80px;
}

.cellContentDefault {
	background: var(--nb-bg-elevated);
}

.cellContentStriped {
	background-image: repeating-linear-gradient(-45deg, #fff, #fff 6px, #e5e5e5 6px, #e5e5e5 12px);
}

@media (prefers-color-scheme: dark) {
	.cellContentStriped {
		background-image: repeating-linear-gradient(-45deg, #262626, #262626 6px, #404040 6px, #404040 12px);
	}
}

.cellContentCheckered {
	background-color: #fff;
	background-image:
		linear-gradient(45deg, #e5e5e5 25%, transparent 25%), linear-gradient(-45deg, #e5e5e5 25%, transparent 25%),
		linear-gradient(45deg, transparent 75%, #e5e5e5 75%), linear-gradient(-45deg, transparent 75%, #e5e5e5 75%);
	background-size: 16px 16px;
	background-position:
		0 0,
		0 8px,
		8px -8px,
		-8px 0px;
}

@media (prefers-color-scheme: dark) {
	.cellContentCheckered {
		background-color: #262626;
		background-image:
			linear-gradient(45deg, #404040 25%, transparent 25%), linear-gradient(-45deg, #404040 25%, transparent 25%),
			linear-gradient(45deg, transparent 75%, #404040 75%), linear-gradient(-45deg, transparent 75%, #404040 75%);
	}
}

.cellError {
	color: var(--nb-error-text);
	font-size: var(--nb-text-sm);
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * SELECTED VIEW (EXPANDED CELL)
 * ═══════════════════════════════════════════════════════════════════════════════ */

.selectedView {
	flex: 1;
	display: flex;
	flex-direction: column;
	overflow: hidden;
}

.selectedLabel {
	padding: var(--nb-space-2) var(--nb-space-6);
	font-size: var(--nb-text-sm);
	font-family: var(--nb-font-mono);
	color: var(--nb-text-secondary);
	background: var(--nb-bg-panel);
	border-bottom: 1px solid var(--nb-border-subtle);
}

.selectedCanvas {
	flex: 1;
	display: flex;
	align-items: center;
	justify-content: center;
	overflow: auto;
}

.canvasDefault {
	background: var(--nb-bg-canvas);
}

.canvasStriped {
	background-image: repeating-linear-gradient(-45deg, #fff, #fff 10px, #e5e5e5 10px, #e5e5e5 20px);
}

@media (prefers-color-scheme: dark) {
	.canvasStriped {
		background-image: repeating-linear-gradient(-45deg, #262626, #262626 10px, #404040 10px, #404040 20px);
	}
}

.canvasCheckered {
	background-color: #fff;
	background-image:
		linear-gradient(45deg, #e5e5e5 25%, transparent 25%), linear-gradient(-45deg, #e5e5e5 25%, transparent 25%),
		linear-gradient(45deg, transparent 75%, #e5e5e5 75%), linear-gradient(-45deg, transparent 75%, #e5e5e5 75%);
	background-size: 20px 20px;
	background-position:
		0 0,
		0 10px,
		10px -10px,
		-10px 0px;
}

@media (prefers-color-scheme: dark) {
	.canvasCheckered {
		background-color: #262626;
		background-image:
			linear-gradient(45deg, #404040 25%, transparent 25%), linear-gradient(-45deg, #404040 25%, transparent 25%),
			linear-gradient(45deg, transparent 75%, #404040 75%), linear-gradient(-45deg, transparent 75%, #404040 75%);
	}
}

.selectedFrame {
	padding: var(--nb-space-8);
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * BACKGROUND SWITCHER
 * ═══════════════════════════════════════════════════════════════════════════════ */

.backgroundSwitcher {
	display: flex;
	align-items: center;
	gap: var(--nb-space-1);
}

.bgButton {
	position: relative;
	width: 28px;
	height: 28px;
	border-radius: var(--nb-radius-md);
	border: 2px solid var(--nb-border-default);
	overflow: hidden;
	cursor: pointer;
	transition:
		border-color var(--nb-transition-fast),
		box-shadow var(--nb-transition-fast);
	background: none;
	padding: 0;
}

.bgButton:hover {
	border-color: var(--nb-border-strong);
}

.bgButtonActive {
	border-color: var(--nb-text-brand);
	box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
}

.bgButtonInner {
	position: absolute;
	inset: 0;
	display: flex;
	align-items: center;
	justify-content: center;
}

.bgDefault {
	background: var(--nb-neutral-100);
}

@media (prefers-color-scheme: dark) {
	.bgDefault {
		background: var(--nb-neutral-800);
	}
}

.bgStriped {
	background-image: repeating-linear-gradient(-45deg, #fff, #fff 2px, #e5e5e5 2px, #e5e5e5 4px);
}

@media (prefers-color-scheme: dark) {
	.bgStriped {
		background-image: repeating-linear-gradient(-45deg, #262626, #262626 2px, #404040 2px, #404040 4px);
	}
}

.bgCheckered {
	background-color: #fff;
	background-image:
		linear-gradient(45deg, #e5e5e5 25%, transparent 25%), linear-gradient(-45deg, #e5e5e5 25%, transparent 25%),
		linear-gradient(45deg, transparent 75%, #e5e5e5 75%), linear-gradient(-45deg, transparent 75%, #e5e5e5 75%);
	background-size: 8px 8px;
	background-position:
		0 0,
		0 4px,
		4px -4px,
		-4px 0px;
}

@media (prefers-color-scheme: dark) {
	.bgCheckered {
		background-color: #262626;
		background-image:
			linear-gradient(45deg, #404040 25%, transparent 25%), linear-gradient(-45deg, #404040 25%, transparent 25%),
			linear-gradient(45deg, transparent 75%, #404040 75%), linear-gradient(-45deg, transparent 75%, #404040 75%);
	}
}

/* ═══════════════════════════════════════════════════════════════════════════════
 * LOADING & ERROR STATES
 * ═══════════════════════════════════════════════════════════════════════════════ */

.loading {
	flex: 1;
	display: flex;
	align-items: center;
	justify-content: center;
	color: var(--nb-text-tertiary);
}

.error {
	margin: var(--nb-space-6);
	padding: var(--nb-space-4);
	border-radius: var(--nb-radius-md);
	border: 1px solid var(--nb-error-border);
	background: var(--nb-error-light);
}

.errorTitle {
	font-weight: var(--nb-font-medium);
	color: var(--nb-error-text);
	margin: 0 0 var(--nb-space-1) 0;
}

.errorMessage {
	font-size: var(--nb-text-sm);
	color: var(--nb-error-text);
	opacity: 0.9;
	margin: 0;
}
